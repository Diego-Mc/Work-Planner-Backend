import{i as b,k as f,d as t,j as e}from"./index-385f3d21.js";import{u as N}from"./machinesSlice-2978359d.js";import{u as g}from"./statisticsSlice-e1d7dff1.js";import{u as y}from"./workersSlice-b10fa77d.js";import{u as W}from"./useMachineHandlers-e256c779.js";import{u as w,V as v,a as C,b as x,c as V}from"./useWindowSize-7a5c312e.js";import"./sweetalert2.all-9a95c6de.js";import"./index-4d501b15.js";const S=({})=>{const d=b(),m=f(),{data:a}=N(d.machineId),{data:l}=y(),{data:c}=g(),i=w(),{handleAmountOfWorkersChange:h,handleDelete:u,handleImportanceChange:k,handleNameChange:p}=W(),n=[];if(c&&l&&a){const s=c.amountWorkedPerMachine[a._id];l.forEach(r=>{var o;n.push({worker:r.name,amountWorked:((o=s==null?void 0:s[r._id])==null?void 0:o.length)||0})}),n.sort((r,o)=>r.amountWorked-o.amountWorked)}return t("section",{className:"machine-dashboard dashboard",children:[a?t("div",{className:"dashboard-header",children:[t("div",{className:"header-details",children:[t("h2",{className:"title",children:[e("span",{className:"material-symbols-outlined back-icon",onClick:()=>m("/machines"),children:"chevron_right"}),a.name]}),t("div",{className:"actions",children:[e("button",{className:"pill-btn",onClick:()=>h(a),children:"יעד עובדים"}),e("button",{className:"pill-btn",onClick:()=>k(a),children:"חשיבות"}),e("button",{className:"pill-btn",onClick:()=>p(a),children:"שינוי שם"}),e("button",{className:"pill-btn danger",onClick:()=>u(a),children:"ניתוק"})]})]}),a.amountOfWorkers===1?t("p",{className:"header-sub-details",children:["המכונה מיועדת לעובד אחד ובעלת חשיבות ",a.importance,"."]}):t("p",{className:"header-sub-details",children:["המכונה מיועדת ל",e("span",{className:"workers-amount-cta",children:a.amountOfWorkers})," ","עובדים ובעלת חשיבות ",a.importance,"."]})]}):null,e("div",{className:"stat",children:t("div",{className:"main-stat",children:[e("h3",{className:"stat-title",children:"כמות סבבי עבודה של כל עובד במכונה"}),e("div",{className:"stat-wrapper",children:t(v,{horizontal:!0,domainPadding:16,padding:{top:30,bottom:30,left:120,right:60},width:((i==null?void 0:i.width)||1200)<720?i.width:((i==null?void 0:i.width)||1200)-400,height:n.length*80,children:[e(C,{theme:x.material,style:{data:{fill:"#ffa600"},labels:{fontFamily:"Rubik",fontSize:16}},data:n,labels:({datum:s})=>s.amountWorked?`${s.amountWorked}`:"",x:"worker",y:"amountWorked"}),e(V,{tickFormat:s=>`${s}`,style:{tickLabels:{padding:10,fontSize:16,fontFamily:"Rubik"}}})]})})]})})]})};export{S as MachineDashboard,S as default};
