import{b as a,j as e,k as s,o as t}from"./index-f9649d7c.js";import{c as i}from"./machinesSlice-d72c876a.js";import{X as n}from"./statisticsSlice-8f9b887a.js";import{u as l}from"./workersSlice-b1a2981f.js";import{u as r}from"./useMachineHandlers-29019b02.js";import{u as o,V as d,a as c,b as m,c as h}from"./useWindowSize-756c0d94.js";import"./sweetalert2.all-37aa507a.js";import"./index-06bcf729.js";const u=({statistics:s,workers:t,machine:i})=>{const n=o(),l=[];if(s&&t&&i){const a=s.amountWorkedPerMachine[i._id];t.forEach((e=>{l.push({worker:e.name,amountWorked:a?.[e._id]?.length||0})})),l.sort(((a,e)=>a.amountWorked-e.amountWorked))}return a(d,{horizontal:!0,domainPadding:16,padding:{top:30,bottom:30,left:120,right:60},width:(n?.width||1200)<720?n.width:(n?.width||1200)-400,height:80*l.length,children:[e(c,{theme:m.material,style:{data:{fill:"#ffa600"},labels:{fontFamily:"Rubik",fontSize:16}},data:l,labels:({datum:a})=>a.amountWorked?`${a.amountWorked}`:"",x:"worker",y:"amountWorked"}),e(h,{tickFormat:a=>`${a}`,style:{tickLabels:{padding:10,fontSize:16,fontFamily:"Rubik"}}})]})},k=({})=>{const o=s(),d=t(),{data:c}=i(o.machineId),{data:m}=l(),{data:h}=n(),{handleAmountOfWorkersChange:k,handleDelete:p,handleImportanceChange:b,handleNameChange:f}=r();return a("section",{className:"machine-dashboard dashboard",children:[c?a("div",{className:"dashboard-header",children:[a("div",{className:"header-details",children:[a("h2",{className:"title",children:[e("span",{className:"material-symbols-outlined back-icon",onClick:()=>d("/machines"),children:""}),c.name]}),a("div",{className:"actions",children:[e("button",{className:"pill-btn",onClick:()=>k(c),children:"יעד עובדים"}),e("button",{className:"pill-btn",onClick:()=>b(c),children:"חשיבות"}),e("button",{className:"pill-btn",onClick:()=>f(c),children:"שינוי שם"}),e("button",{className:"pill-btn danger",onClick:()=>p(c),children:"ניתוק"})]})]}),1===c.amountOfWorkers?a("p",{className:"header-sub-details",children:["המכונה מיועדת לעובד אחד ובעלת חשיבות ",c.importance,"."]}):a("p",{className:"header-sub-details",children:["המכונה מיועדת ל",e("span",{className:"workers-amount-cta",children:c.amountOfWorkers})," ","עובדים ובעלת חשיבות ",c.importance,"."]})]}):null,e("div",{className:"stat",children:a("div",{className:"main-stat",children:[e("h3",{className:"stat-title",children:"כמות סבבי עבודה של כל עובד במכונה"}),e("div",{className:"stat-wrapper",children:c&&h&&m?e(u,{machine:c,statistics:h,workers:m}):null})]})})]})};export{k as MachineDashboard,k as default};
