import{r as u,_ as k,o as y,d as i,j as a}from"./index-6e080c71.js";import{a as b,h as c}from"./moment-601c7010.js";import{u as N}from"./machinesSlice-7ef1c114.js";import{u as _,b as w,c as v}from"./workersSlice-99c465b6.js";const A=u.lazy(()=>k(()=>import("./ShiftTimesSettingsList-2be7ca6a.js"),["assets/ShiftTimesSettingsList-2be7ca6a.js","assets/index-6e080c71.js","assets/index-704cebe8.css"])),E=({})=>{const{data:e}=_(),{data:l}=N(),[h]=w(),[f]=v(),[m]=b(),g=y(),p=(s,n)=>{const r=e==null?void 0:e.find(t=>t._id===s);r&&(r.shiftTime===n&&(n=""),h({workerId:s,shiftTime:n}))},S=s=>{f()},o=async()=>{if(!l||!e)return;const s=[];l.forEach(t=>{s.push({machine:t._id,data:{morning:new Array(t.amountOfWorkers).fill(null),evening:new Array(t.amountOfWorkers).fill(null),night:new Array(t.amountOfWorkers).fill(null)},locked:{morning:new Array(t.amountOfWorkers).fill(!1),evening:new Array(t.amountOfWorkers).fill(!1),night:new Array(t.amountOfWorkers).fill(!1)}})});const n=await m({date:{from:+c().day(6),to:+c().day(5+7)},table:s,workers:{used:[],unused:e}});if(!("data"in n))return;const r=n.data._id;g(`/edit/${r}`)},d=(e==null?void 0:e.reduce((s,n)=>s+(n.shiftTime===""?0:1),0))||0;return i("section",{className:"workers-shift-setup-view",children:[i("section",{className:"first-step",children:[i("header",{className:"worker-shift-header",children:[a("h2",{className:"title",children:"זמן משמרת"}),i("div",{className:"btns",children:[a("button",{className:"pill-btn danger",onClick:S,children:"אתחול"}),a("button",{className:"pill-btn continue-btn",onClick:o,children:"המשך"})]})]}),e?a(u.Suspense,{children:a(A,{handleToggleShift:p,workers:e})}):null]}),i("section",{className:"next-step",children:[e?d<e.length?a("p",{children:`שייכת זמני משמרת ל${d} עובדים מתוך ${e.length}, עוד קצת ומסיימים!`}):a("p",{children:"כולם משויכים, אפשר להתקדם!"}):null,a("button",{className:"btn outlined continue-btn",onClick:o,children:"המשך"})]})]})};export{E as ScheduleSettings,E as default};
