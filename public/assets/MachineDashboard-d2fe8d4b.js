import{b as n,j as e,k as m,o as h}from"./index-9fc7feec.js";import{c as u}from"./machinesSlice-7f69dc83.js";import{X as k}from"./statisticsSlice-5cbfe4e2.js";import{u as p}from"./workersSlice-0cbf3377.js";import{u as b}from"./useMachineHandlers-e0bc4f81.js";import{u as f,V as N,a as g,b as y,c as W}from"./useWindowSize-82b6d765.js";import"./sweetalert2.all-fe1d2ff4.js";import"./index-4d501b15.js";const C=({statistics:l,workers:c,machine:a})=>{const t=f(),r=[];if(l&&c&&a){const s=l.amountWorkedPerMachine[a._id];c.forEach(o=>{var i;r.push({worker:o.name,amountWorked:((i=s==null?void 0:s[o._id])==null?void 0:i.length)||0})}),r.sort((o,i)=>o.amountWorked-i.amountWorked)}return n(N,{horizontal:!0,domainPadding:16,padding:{top:30,bottom:30,left:120,right:60},width:((t==null?void 0:t.width)||1200)<720?t.width:((t==null?void 0:t.width)||1200)-400,height:r.length*80,children:[e(g,{theme:y.material,style:{data:{fill:"#ffa600"},labels:{fontFamily:"Rubik",fontSize:16}},data:r,labels:({datum:s})=>s.amountWorked?`${s.amountWorked}`:"",x:"worker",y:"amountWorked"}),e(W,{tickFormat:s=>`${s}`,style:{tickLabels:{padding:10,fontSize:16,fontFamily:"Rubik"}}})]})},G=({})=>{const l=m(),c=h(),{data:a}=u(l.machineId),{data:t}=p(),{data:r}=k(),{handleAmountOfWorkersChange:s,handleDelete:o,handleImportanceChange:i,handleNameChange:d}=b();return n("section",{className:"machine-dashboard dashboard",children:[a?n("div",{className:"dashboard-header",children:[n("div",{className:"header-details",children:[n("h2",{className:"title",children:[e("span",{className:"material-symbols-outlined back-icon",onClick:()=>c("/machines"),children:""}),a.name]}),n("div",{className:"actions",children:[e("button",{className:"pill-btn",onClick:()=>s(a),children:"יעד עובדים"}),e("button",{className:"pill-btn",onClick:()=>i(a),children:"חשיבות"}),e("button",{className:"pill-btn",onClick:()=>d(a),children:"שינוי שם"}),e("button",{className:"pill-btn danger",onClick:()=>o(a),children:"ניתוק"})]})]}),a.amountOfWorkers===1?n("p",{className:"header-sub-details",children:["המכונה מיועדת לעובד אחד ובעלת חשיבות ",a.importance,"."]}):n("p",{className:"header-sub-details",children:["המכונה מיועדת ל",e("span",{className:"workers-amount-cta",children:a.amountOfWorkers})," ","עובדים ובעלת חשיבות ",a.importance,"."]})]}):null,e("div",{className:"stat",children:n("div",{className:"main-stat",children:[e("h3",{className:"stat-title",children:"כמות סבבי עבודה של כל עובד במכונה"}),e("div",{className:"stat-wrapper",children:a&&r&&t?e(C,{machine:a,statistics:r,workers:t}):null})]})})]})};export{G as MachineDashboard,G as default};
