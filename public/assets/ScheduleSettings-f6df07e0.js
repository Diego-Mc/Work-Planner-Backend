import{r as u,_ as k,b,j as i,a}from"./index-f02a5516.js";import{i as y,h as c}from"./schedulesSlice-1b552edb.js";import{b as N}from"./machinesSlice-d86a53fd.js";import{u as _,d as w,e as v}from"./workersSlice-5c6aa889.js";const A=u.lazy(()=>k(()=>import("./ShiftTimesSettingsList-453842dd.js"),["assets/ShiftTimesSettingsList-453842dd.js","assets/index-f02a5516.js","assets/index-f542eb3f.css"])),E=({})=>{const{data:e}=_(),{data:l}=N(),[h]=w(),[f]=v(),[m]=y(),g=b(),p=(s,n)=>{const r=e==null?void 0:e.find(t=>t._id===s);r&&(r.shiftTime===n&&(n=""),h({workerId:s,shiftTime:n}))},S=s=>{f()},o=async()=>{if(!l||!e)return;const s=[];l.forEach(t=>{s.push({machine:t._id,data:{morning:new Array(t.amountOfWorkers).fill(null),evening:new Array(t.amountOfWorkers).fill(null),night:new Array(t.amountOfWorkers).fill(null)},locked:{morning:new Array(t.amountOfWorkers).fill(!1),evening:new Array(t.amountOfWorkers).fill(!1),night:new Array(t.amountOfWorkers).fill(!1)}})});const n=await m({date:{from:+c().day(6),to:+c().day(5+7)},table:s,workers:{used:[],unused:e}});if(!("data"in n))return;const r=n.data._id;g(`/edit/${r}`)},d=(e==null?void 0:e.reduce((s,n)=>s+(n.shiftTime===""?0:1),0))||0;return i("section",{className:"workers-shift-setup-view",children:[i("section",{className:"first-step",children:[i("header",{className:"worker-shift-header",children:[a("h2",{className:"title",children:"זמן משמרת"}),i("div",{className:"btns",children:[a("button",{className:"pill-btn danger",onClick:S,children:"אתחול"}),a("button",{className:"pill-btn continue-btn",onClick:o,children:"המשך"})]})]}),e?a(u.Suspense,{children:a(A,{handleToggleShift:p,workers:e})}):null]}),i("section",{className:"next-step",children:[e?d<e.length?a("p",{children:`שייכת זמני משמרת ל${d} עובדים מתוך ${e.length}, עוד קצת ומסיימים!`}):a("p",{children:"כולם משויכים, אפשר להתקדם!"}):null,a("button",{className:"btn outlined continue-btn",onClick:o,children:"המשך"})]})]})};export{E as ScheduleSettings,E as default};
