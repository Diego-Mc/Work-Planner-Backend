import{r as e,_ as n,o as r,b as s,j as i}from"./index-f9649d7c.js";import{a as t,h as a}from"./moment-469476d6.js";import{u as l}from"./machinesSlice-d72c876a.js";import{u as o,b as c,c as d}from"./workersSlice-b1a2981f.js";const m=e.lazy((()=>n((()=>import("./ShiftTimesSettingsList-9ac84502.js")),["assets/ShiftTimesSettingsList-9ac84502.js","assets/index-f9649d7c.js","assets/index-211e062e.css"]))),h=({})=>{const{data:n}=o(),{data:h}=l(),[f]=c(),[u]=d(),[k]=t(),p=r(),w=async()=>{if(!h||!n)return;const e=[];h.forEach((n=>{e.push({machine:n._id,data:{morning:new Array(n.amountOfWorkers).fill(null),evening:new Array(n.amountOfWorkers).fill(null),night:new Array(n.amountOfWorkers).fill(null)},locked:{morning:new Array(n.amountOfWorkers).fill(!1),evening:new Array(n.amountOfWorkers).fill(!1),night:new Array(n.amountOfWorkers).fill(!1)}})}));const r=await k({date:{from:+a().day(6),to:+a().day(12)},table:e,workers:{used:[],unused:n}});if(!("data"in r))return;const s=r.data._id;p(`/edit/${s}`)},g=n?.reduce(((e,n)=>e+(""===n.shiftTime?0:1)),0)||0;return s("section",{className:"workers-shift-setup-view",children:[s("section",{className:"first-step",children:[s("header",{className:"worker-shift-header",children:[i("h2",{className:"title",children:"זמן משמרת"}),s("div",{className:"btns",children:[i("button",{className:"pill-btn danger",onClick:e=>{u()},children:"אתחול"}),i("button",{className:"pill-btn continue-btn",onClick:w,children:"המשך"})]})]}),n?i(e.Suspense,{children:i(m,{handleToggleShift:(e,r)=>{const s=n?.find((n=>n._id===e));s&&(s.shiftTime===r&&(r=""),f({workerId:e,shiftTime:r}))},workers:n})}):null]}),s("section",{className:"next-step",children:[n?g<n.length?i("p",{children:`שייכת זמני משמרת ל${g} עובדים מתוך ${n.length}, עוד קצת ומסיימים!`}):i("p",{children:"כולם משויכים, אפשר להתקדם!"}):null,i("button",{className:"btn outlined continue-btn",onClick:w,children:"המשך"})]})]})};export{h as ScheduleSettings,h as default};
